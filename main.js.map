{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["// Данные для успешной авторизации на сервере\nexport const config = {\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-20\",\n  headers: {\n    authorization: \"4ae982e8-2b2c-468a-80fa-ed13fba03bc0\",\n    \"Content-Type\": \"application/json\",\n  },\n};\n\n// Функция обработки ответа от сервера\nexport const getResponse = (result) => {\n  if (result.ok) {\n    return result.json();\n  }\n  return Promise.reject(`Ошибка: ${result.status}`);\n};\n\n// Функция загрузки информации о пользователе с сервера\nexport function loadingProfileInfo() {\n  return fetch(`${config.baseUrl}/users/me`, {\n    method: \"GET\",\n    headers: config.headers,\n  }).then(getResponse);\n}\n\n// Функция загрузки карточек с сервера\nexport function loadingCardsInfo() {\n  return fetch(`${config.baseUrl}/cards `, {\n    method: \"GET\",\n    headers: config.headers,\n  }).then(getResponse);\n}\n\n// Функция редактирования профиля с сервера\nexport function patchEditProfile(nameInput, jobInput) {\n  return fetch(`${config.baseUrl}/users/me`, {\n    method: \"PATCH\",\n    headers: config.headers,\n    body: JSON.stringify({\n      name: nameInput,\n      about: jobInput,\n    }),\n  });\n}\n\n// Функция отправки данных карточки на сервер\nexport function postNewCard(placeName, link) {\n  return fetch(`${config.baseUrl}/cards`, {\n    method: \"POST\",\n    headers: config.headers,\n    body: JSON.stringify({\n      name: placeName,\n      link: link,\n    }),\n  }).then(getResponse);\n}\n\n// Функция загрузки лайков\nexport function loadingLikesQuantity() {\n  return fetch(`${config.baseUrl}/cards`, {\n    method: \"GET\",\n    headers: config.headers,\n  }).then(getResponse);\n}\n\n// Функция удаления карточки с сервера\nexport function deleteCardServer(id) {\n  return fetch(`${config.baseUrl}/cards/${id}`, {\n    method: \"DELETE\",\n    headers: config.headers,\n  }).then(getResponse);\n}\n\n// Функция удаления лайка\nexport function deleteLike(id) {\n  return fetch(`${config.baseUrl}/cards/likes/${id}`, {\n    method: \"DELETE\",\n    headers: config.headers,\n  }).then(getResponse);\n}\n\n// Функция постановки лайка\nexport function putLike(id) {\n  return fetch(`${config.baseUrl}/cards/likes/${id}`, {\n    method: \"PUT\",\n    headers: config.headers,\n  }).then(getResponse);\n}\n\n// Функция изменения аватара\nexport function patchAvatar(avatarUrl) {\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\n    method: \"PATCH\",\n    headers: config.headers,\n    body: JSON.stringify({\n      avatar: avatarUrl,\n    }),\n  }).then(getResponse);\n}\n","import { putLike, deleteLike } from \"./api.js\";\n\n// @todo: Темплейт карточки\nexport const cardTemplate = document.querySelector(\"#card-template\").content;\n\n// @todo: Функция создания карточки\nexport function createCard(\n  cardTemplate,\n  item,\n  openImagePopup,\n  likedButton,\n  userId,\n  deleteCardServer,\n) {\n  const cardElement = cardTemplate\n    .querySelector(\".places__item\")\n    .cloneNode(true);\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\n\n  const cardLikeButton = cardElement.querySelector(\".card__like-button\");\n  const likesCounter = cardTemplate.querySelector(\".likes__counter\");\n\n  const cardImage = cardElement.querySelector(\".card__image\");\n  const cardTitle = cardElement.querySelector(\".card__title\");\n  cardImage.src = item.link;\n  cardImage.alt = item.name;\n  cardTitle.textContent = item.name;\n  likesCounter.textContent = item.likes.length;\n\n  // Скрыть кнопку удаления, если карточку загрузил не я\n  if (userId !== item.owner._id) {\n    deleteButton.classList.add(\"inactive\");\n  }\n\n  // Закрасить кнопку лайка там, где я его поставил\n  if (item.likes.some((like) => like._id === userId)) {\n    cardLikeButton.classList.add(\"card__like-button_is-active\");\n  }\n\n  // Вызов функции удаления карточки с сервера\n  deleteButton.addEventListener(\"click\", function (evt) {\n    deleteCardServer(item._id)\n      .then(() => {\n        removeCard(evt);\n      })\n      .catch((error) => {\n        console.log(`Ошибка: ${error}`);\n      });\n  });\n\n  // Вызов функции постановки лайка\n  cardLikeButton.addEventListener(\"click\", function (evt) {\n    likedButton(evt, item, likesCounter);\n  });\n\n  // Вызов функции открытия картинки у карточки\n  cardImage.addEventListener(\"click\", function () {\n    openImagePopup(item);\n  });\n\n  return cardElement;\n}\n\n// @todo: Функция удаления карточки\nexport function removeCard(evt) {\n  const listItem = evt.target.closest(\".places__item\");\n  listItem.remove();\n}\n\n// Функция лайка\nexport function likedButton(evt, item, likesCounter) {\n  if (evt.target.classList.contains(\"card__like-button_is-active\")) {\n    deleteLike(item._id)\n      .then((res) => {\n        evt.target.classList.remove(\"card__like-button_is-active\");\n        likesCounter.textContent = res.likes.length;\n      })\n      .catch((error) => {\n        console.log(`Ошибка: ${error}`);\n      });\n  } else {\n    putLike(item._id)\n      .then((res) => {\n        evt.target.classList.add(\"card__like-button_is-active\");\n        likesCounter.textContent = res.likes.length;\n        console.log(item.likes);\n      })\n      .catch((error) => {\n        console.log(`Ошибка: ${error}`);\n      });\n  }\n}\n","// import {hideInputError} from \"../components/validation.js\";\n\n// Функция добавления класса popup_is-opened\nexport function openModal(item) {\n  item.classList.add(\"popup_is-opened\");\n  document.addEventListener(\"keydown\", closeByEsc);\n}\n\n// Функция удаления класса popup_is-opened\nexport function closeModal(item) {\n  item.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"keydown\", closeByEsc);\n}\n\n// Функция закрытия через Esc\nexport function closeByEsc(evt) {\n  if (evt.key === \"Escape\") {\n    closeModal(document.querySelector(\".popup_is-opened\"));\n  }\n}\n\nexport function closePopupOverlay(evt) {\n  if (evt.currentTarget === evt.target) {\n    closeModal(evt.target);\n  }\n}\n","// Функция, которая добавляет класс с ошибкой\nconst showInputError = (\n  popupFormElement,\n  popupInput,\n  errorMessage,\n  validationConfig,\n) => {\n  const formError = popupFormElement.querySelector(`.${popupInput.id}-error`);\n  popupInput.classList.add(validationConfig.inputErrorClass);\n  formError.textContent = errorMessage;\n  formError.classList.add(validationConfig.errorClass);\n};\n\n// Функция, которая удаляет класс с ошибкой\nexport const hideInputError = (formElement, popupInput, validationConfig) => {\n  const formError = formElement.querySelector(`.${popupInput.id}-error`);\n  popupInput.classList.remove(validationConfig.inputErrorClass);\n  if (formError) {\n    formError.classList.remove(validationConfig.errorClass);\n    formError.textContent = \"\";\n  }\n};\n\n// Функция, которая проверяет валидность поля\nconst isValid = (popupFormElement, popupInput, validationConfig) => {\n  if (popupInput.validity.patternMismatch) {\n    popupInput.setCustomValidity(popupInput.dataset.errorMessage);\n  } else {\n    popupInput.setCustomValidity(\"\");\n  }\n\n  if (!popupInput.validity.valid) {\n    showInputError(\n      popupFormElement,\n      popupInput,\n      popupInput.validationMessage,\n      validationConfig,\n    );\n  } else {\n    hideInputError(popupFormElement, popupInput, validationConfig);\n  }\n};\n\n// Функция, которая обрабатывает все инпуты\nconst setEventListeners = (popupFormElement, validationConfig) => {\n  const inputList = Array.from(\n    popupFormElement.querySelectorAll(validationConfig.popupInput),\n  );\n  const buttonElement = popupFormElement.querySelector(\n    validationConfig.buttonElement,\n  );\n  toggleButtonState(inputList, buttonElement);\n  inputList.forEach((popupInput) => {\n    popupInput.addEventListener(\"input\", () => {\n      isValid(popupFormElement, popupInput, validationConfig);\n      toggleButtonState(inputList, buttonElement, validationConfig);\n    });\n  });\n};\n\n// Функция, которая добавляет слушатель на все формы\nexport const enableValidation = (validationConfig) => {\n  const formList = Array.from(\n    document.querySelectorAll(validationConfig.popupFormElement),\n  );\n  formList.forEach((popupFormElement) => {\n    popupFormElement.addEventListener(\"submit\", (evt) => {\n      evt.preventDefault();\n    });\n    setEventListeners(popupFormElement, validationConfig);\n  });\n};\n\n// Функция, которая ищет хотя-бы одно невалидное поле\nconst hasInvalidInput = (inputList) => {\n  return inputList.some((popupInput) => {\n    return !popupInput.validity.valid;\n  });\n};\n\n// Функция, которая активирует или деактивирует кнопку\nconst toggleButtonState = (inputList, buttonElement, validationConfig) => {\n  // Если есть хотя бы один невалидный инпут\n  if (hasInvalidInput(inputList)) {\n    // сделаем кнопку неактивной\n    buttonElement.disabled = true;\n  } else {\n    // иначе сделаем кнопку активной\n    buttonElement.disabled = false;\n  }\n};\n\nexport const clearValidation = (popupFormElement, validationConfig) => {\n  const inputList = Array.from(\n    popupFormElement.querySelectorAll(validationConfig.popupInput),\n  );\n  const buttonElement = popupFormElement.querySelector(\n    validationConfig.buttonElement,\n  );\n\n  inputList.forEach((popupInput) => {\n    hideInputError(popupFormElement, popupInput, validationConfig);\n  });\n\n  toggleButtonState(inputList, buttonElement, validationConfig);\n};\n","import \"./pages/index.css\";\n\nimport { cardTemplate, createCard, likedButton } from \"./components/card.js\";\n\nimport {\n  openModal,\n  closeModal,\n  closePopupOverlay,\n} from \"./components/modal.js\";\n\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\n\nimport {\n  loadingProfileInfo,\n  loadingCardsInfo,\n  patchEditProfile,\n  postNewCard,\n  deleteCardServer,\n  patchAvatar,\n} from \"./components/api.js\";\n\nconst allPopups = document.querySelectorAll(\".popup\");\n\n// Объект настроек валидации\nconst validationConfig = {\n  popupFormElement: \".popup__form\",\n  popupInput: \".popup__input\",\n  buttonElement: \".popup__button\",\n  inactiveButtonClass: \".popup__button_disabled\",\n  inputErrorClass: \"form__input_type_error\",\n  errorClass: \"form__input-error_active\",\n};\n\n// @todo: DOM узлы\nconst placesList = document.querySelector(\".places__list\");\n\nconst profile = document.querySelector(\".profile\");\nconst profileInfo = profile.querySelector(\".profile__info\");\nconst profileEditButton = profileInfo.querySelector(\".profile__edit-button\");\nconst profileAddButton = profile.querySelector(\".profile__add-button\");\nconst profileTitle = profileInfo.querySelector(\".profile__title\");\nconst profileDescription = profileInfo.querySelector(\".profile__description\");\nconst profileImage = profile.querySelector(\".profile__image\");\n\nconst formElement = document.forms[\"edit-profile\"];\nconst nameInput = formElement.elements.name;\nconst jobInput = formElement.elements.description;\n\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\nconst popupImage = popupTypeImage.querySelector(\".popup__image\");\nconst popupCaption = popupTypeImage.querySelector(\".popup__caption\");\n\nconst popupTypeNewCard = document.querySelector(\".popup_type_new-card\");\nconst popupTypeEdit = document.querySelector(\".popup_type_edit\");\n\nconst newPlace = document.forms[\"new-place\"];\nconst placeName = newPlace.elements[\"place-name\"];\nconst link = newPlace.elements.link;\n\nconst popupAvatar = document.querySelector(\".popup_type_avatar\");\nconst profileAvatar = document.querySelector(\".profile__image\");\nconst avatarForm = document.forms[\"avatar-form\"];\nconst avatarInputUrl = avatarForm.elements.link;\n\n// Функция добавления новой карточки\nfunction addNewCard(evt) {\n  evt.preventDefault();\n  const formButton = evt.submitter;\n  const defaultTextButton = formButton.textContent;\n  formButton.textContent = \"Сохранение...\";\n\n  postNewCard(placeName.value, link.value)\n    .then((item) => {\n      const newCardElement = createCard(\n        cardTemplate,\n        item,\n        openImagePopup,\n        likedButton,\n        item.owner._id,\n        deleteCardServer,\n      );\n      console.log(item.owner);\n      placesList.prepend(newCardElement);\n      closeModal(popupTypeNewCard);\n      evt.target.reset();\n      clearValidation(popupTypeNewCard, validationConfig);\n    })\n    .catch((error) => {\n      console.log(`Ошибка: ${error}`);\n    })\n    .finally(() => {\n      formButton.textContent = defaultTextButton;\n    });\n}\n\n// Функция открытия поп-апа для картинок\nfunction openImagePopup(item) {\n  popupImage.src = item.link;\n  popupImage.alt = item.name;\n  popupCaption.textContent = item.name;\n  openModal(popupTypeImage);\n}\n\n// Функция редактирования профиля\nfunction handleProfileFormSubmit(evt) {\n  evt.preventDefault();\n  const formButton = evt.submitter;\n  const defaultTextButton = formButton.textContent;\n  formButton.textContent = \"Сохранение...\";\n\n  patchEditProfile(nameInput.value, jobInput.value)\n    .then(() => {\n      profileTitle.textContent = nameInput.value;\n      profileDescription.textContent = jobInput.value;\n      closeModal(popupTypeEdit);\n    })\n    .catch((error) => {\n      console.log(`Ошибка: ${error}`);\n    })\n    .finally(() => {\n      formButton.textContent = defaultTextButton;\n    });\n}\n\n// Функция перебора всех поп-апов для удаления класса popup_is-opened\nallPopups.forEach(function (item) {\n  const popupCloseButton = item.querySelector(\".popup__close\");\n  popupCloseButton.addEventListener(\"click\", function () {\n    closeModal(item);\n  });\n  item.addEventListener(\"click\", closePopupOverlay);\n  item.classList.add(\"popup_is-animated\");\n});\n\n// Вывод данных о профиле и карточках с сервера\nPromise.all([loadingProfileInfo(), loadingCardsInfo()])\n  .then(([profileResult, cardsResult]) => {\n    console.log(profileResult);\n    console.log(cardsResult);\n\n    profileTitle.textContent = profileResult.name;\n    profileDescription.textContent = profileResult.about;\n    profileImage.style.backgroundImage = `url(${profileResult.avatar})`;\n    const userId = profileResult._id;\n\n    // @todo: Вывести карточки на страницу\n    cardsResult.forEach(function (item) {\n      const eachElement = createCard(\n        cardTemplate,\n        item,\n        openImagePopup,\n        likedButton,\n        userId,\n        deleteCardServer,\n      );\n      placesList.append(eachElement);\n    });\n  })\n  .catch((error) => {\n    console.log(`Ошибка: ${error}`);\n  });\n\n// Функция очистки полей формы\nexport const clearState = (inputElement) => {\n  const inputList = Array.from(\n    inputElement.querySelectorAll(validationConfig.popupInput),\n  );\n  inputList.forEach((popupInput) => {\n    popupInput.value = \"\";\n  });\n};\n\n// Вызов функции редактирования аватара\navatarForm.addEventListener(\"submit\", function (evt) {\n  evt.preventDefault();\n  const formButton = evt.submitter;\n  const defaultTextButton = formButton.textContent;\n  formButton.textContent = \"Сохранение...\";\n  patchAvatar(avatarInputUrl.value)\n    .then((result) => {\n      profileAvatar.style.backgroundImage = `url(${result.avatar})`;\n      closeModal(popupAvatar);\n      evt.target.reset();\n    })\n    .catch((error) => {\n      console.log(`Ошибка: ${error}`);\n    })\n    .finally(() => {\n      formButton.textContent = defaultTextButton;\n    });\n});\n\n// Вызов функции открытия поп-апа редактирования профиля нажатием на карандаш\nprofileEditButton.addEventListener(\"click\", () => {\n  openModal(popupTypeEdit);\n  nameInput.value = profileTitle.textContent;\n  jobInput.value = profileDescription.textContent;\n  clearValidation(formElement, validationConfig);\n});\n\n// Вызов функции открытия поп-апа добавления нового места нажатием на плюсик\nprofileAddButton.addEventListener(\"click\", () => {\n  openModal(popupTypeNewCard);\n  clearValidation(popupTypeNewCard, validationConfig);\n  clearState(popupTypeNewCard);\n});\n\n// Вызов функции открытия попапа аватара\nprofileImage.addEventListener(\"click\", function () {\n  openModal(popupAvatar);\n  clearValidation(avatarForm, validationConfig);\n  clearState(popupAvatar);\n});\n\n// Вызов функции добавления новой карточки\nnewPlace.addEventListener(\"submit\", addNewCard);\n\n// Вызов функции редактирования профиля\nformElement.addEventListener(\"submit\", handleProfileFormSubmit);\n\n// Вызов функции включения валидации всех форм\nenableValidation(validationConfig);\n"],"names":["config","baseUrl","headers","authorization","getResponse","result","ok","json","Promise","reject","concat","status","deleteCardServer","id","fetch","method","then","cardTemplate","document","querySelector","content","createCard","item","openImagePopup","likedButton","userId","cardElement","cloneNode","deleteButton","cardLikeButton","likesCounter","cardImage","cardTitle","src","link","alt","name","textContent","likes","length","owner","_id","classList","add","some","like","addEventListener","evt","target","closest","remove","removeCard","catch","error","console","log","contains","res","putLike","openModal","closeByEsc","closeModal","removeEventListener","key","closePopupOverlay","currentTarget","hideInputError","formElement","popupInput","validationConfig","formError","inputErrorClass","errorClass","toggleButtonState","inputList","buttonElement","validity","valid","hasInvalidInput","disabled","clearValidation","popupFormElement","Array","from","querySelectorAll","forEach","allPopups","inactiveButtonClass","placesList","profile","profileInfo","profileEditButton","profileAddButton","profileTitle","profileDescription","profileImage","forms","nameInput","elements","jobInput","description","popupTypeImage","popupImage","popupCaption","popupTypeNewCard","popupTypeEdit","newPlace","placeName","popupAvatar","profileAvatar","avatarForm","avatarInputUrl","all","_ref","_ref2","profileResult","cardsResult","about","style","backgroundImage","avatar","eachElement","append","clearState","inputElement","value","preventDefault","avatarUrl","formButton","submitter","defaultTextButton","body","JSON","stringify","reset","finally","postNewCard","newCardElement","prepend","patchEditProfile","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","isValid","setEventListeners","enableValidation"],"sourceRoot":""}